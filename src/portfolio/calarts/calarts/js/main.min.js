function onPrintFade(t,e){"use strict";var n,r=this,o=750;return e?(this.domTarget.css("opacity",0),r.domTarget.html(t),this.domTarget.animate({opacity:1},o)):(n=$(t).css("opacity",0),this.domTarget.append(n),n.animate({opacity:1},o)),!1}function CleanName(t){return t.replace(/\W/g,"")}function Artist(t){this.Name=t,this.Examine=function(){return"a rare "+this.Name},this.Get=function(){return story.putInInventory(this.Name),"you collect "+this.Name},this.Activated=!1,this.ActivateText="you activate "+this.Name;var e=CleanName(t);createArtistTag(t),Artists[e]=this}function makeArtists(){window.characterNames=["Angeli","Angus","Bex","Callym","Lu","Ruth Spencer-Jolly","Ruth Smith"];for(var t=0;t<characterNames.length;++t)new Artist(characterNames[t])}function createArtistTag(t){var e=CleanName(t),n=$("<obj/>",{id:t,inventoryName:t}),r=$("<action/>",{id:"Collect",text:"{{= Artists['"+e+"'].Get() }}"}),o=$("<when/>",{text:"!story.isInInventory('"+t+"')"}),i=$("<action/>",{id:"Examine",text:"{{= Artists['"+e+"'].Examine() }}"}),a=$("<action/>",{id:"Activate",text:"{{= Activate('"+t+"') }}"}),s=$("<when/>",{text:"CanActivate('"+t+"')"});n.append(r.append(o)),n.append(i),n.append(a.append(s)),$("#story").append(n)}function Activate(t){console.log("activate"+t);var e=CleanName(t);if(null!=story.activatedArtist||"undefined"!=typeof story.activatedArtist){var n=CleanName(story.activatedArtist),r=Artists[n].Name;Artists[n].Activated=!1,$("#artistsList > #"+n+" > a").removeClass("activated"),console.log("Deactivated: "+r)}if(Artists.hasOwnProperty(e)){var r=Artists[e].Name;return Artists[e].Activated=!0,story.activatedArtist=r,$("#artistsList > #"+e+" > a").addClass("activated"),console.log("Activated: "+r),Artists[e].ActivateText}return""}function CanActivate(t){return story.activatedArtist!=t&&story.isInInventory(t)}!function(){function t(e,n,r){return("string"==typeof n?n:n.toString()).replace(e.define||a,function(t,n,o,i){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in r||(":"===o?(e.defineParams&&i.replace(e.defineParams,function(t,e,o){r[n]={arg:e,text:o}}),n in r||(r[n]=i)):new Function("def","def['"+n+"']="+i)(r)),""}).replace(e.use||a,function(n,o){e.useParams&&(o=o.replace(e.useParams,function(t,e,n,o){return r[n]&&r[n].arg&&o?(t=(n+":"+o).replace(/'|\\/g,"_"),r.__exp=r.__exp||{},r.__exp[t]=r[n].text.replace(new RegExp("(^|[^\\w$])"+r[n].arg+"([^\\w$])","g"),"$1"+o+"$2"),e+"def.__exp['"+t+"']"):void 0}));var i=new Function("def","return "+o)(r);return i?t(e,i,r):i})}function e(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var n,r={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};r.encodeHTMLSource=function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(n,function(t){return e[t]||t}):""}},n=function(){return this||(0,eval)("this")}(),"undefined"!=typeof module&&module.exports?module.exports=r:"function"==typeof define&&define.amd?define(function(){return r}):n.doT=r;var o={start:"'+(",end:")+'",startencode:"'+encodeHTML("},i={start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("},a=/$^/;r.template=function(s,u,c){u=u||r.templateSettings;var h,p,d=u.append?o:i,l=0;s=u.use||u.define?t(u,s,c||{}):s,s=("var out='"+(u.strip?s.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):s).replace(/'|\\/g,"\\$&").replace(u.interpolate||a,function(t,n){return d.start+e(n)+d.end}).replace(u.encode||a,function(t,n){return h=!0,d.startencode+e(n)+d.end}).replace(u.conditional||a,function(t,n,r){return n?r?"';}else if("+e(r)+"){out+='":"';}else{out+='":r?"';if("+e(r)+"){out+='":"';}out+='"}).replace(u.iterate||a,function(t,n,r,o){return n?(l+=1,p=o||"i"+l,n=e(n),"';var arr"+l+"="+n+";if(arr"+l+"){var "+r+","+p+"=-1,l"+l+"=arr"+l+".length-1;while("+p+"<l"+l+"){"+r+"=arr"+l+"["+p+"+=1];out+='"):"';} } out+='"}).replace(u.evaluate||a,function(t,n){return"';"+e(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),h&&(u.selfcontained||!n||n._encodeHTML||(n._encodeHTML=r.encodeHTMLSource(u.doNotSkipEncoded)),s="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+r.encodeHTMLSource.toString()+"("+(u.doNotSkipEncoded||"")+"));"+s);try{return new Function(u.varname,s)}catch(f){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+s),f}},r.compile=function(t,e){return r.template(t,null,e)}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/,"")}),String.prototype.rtrim||(String.prototype.rtrim=function(){return this.replace(/\s+$/,"")}),String.prototype.startsWith||(String.prototype.startsWith=function(t){return 0===this.lastIndexOf(t,0)});var Dedalus,story;!function(){"use strict";function makeMessageCenter(){function t(t,e,n){r.hasOwnProperty(t)||(r[t]={}),r[t][e]=n}function e(t,e){r.hasOwnProperty(t)||(r[t]={}),r[t].hasOwnProperty(e)&&delete r[t][e]}function n(t,e){var n;if(r.hasOwnProperty(t))for(n in r[t])r[t].hasOwnProperty(n)&&r[t][n](e)}var r={};return{publish:n,subscribe:t,unsubscribe:e}}Dedalus=function(t){this.options=t,this.options&&(this.dedleeSource=this.options.dedleeSource,this.domSource=this.options.domSource,this._story=this.options?this.parseStory():{}),this._story||(this._story={}),this.storyUndo={},this._storyUndo={},this.messageCenter=makeMessageCenter(),story=this.generateEmptyStory()},Dedalus.prototype.parseStory=function(){function getTitleLocal(t){return t.find("title").html()||"A Dedalus Story"}function getInitScript(t){return t.find("initscript").text()}function getIntroLocal(t){return t.find("#intro").html()}function getObjects(parent){var objects={};return parent.find(">obj, >character").each(function(){function getActiveActions(){var t,e={},n=objects[id];for(t in n.actions)n.actions.hasOwnProperty(t)&&n.actions[t].when()&&(e[t]=n.actions[t]);return e}var obj=$(this),id=obj.attr("id"),inventoryName=obj.attr("inventoryName");objects[id]={actions:{},inventoryName:inventoryName},obj.find("action").each(function(){var whenCheck=function(){return!0},action=$(this),when=action.find("when").text()||void 0,withCombinations={},hasCombinations=!1;void 0!==when&&(whenCheck=function(){return eval(when)}),action.find("when").remove(),action.find("with").each(function(){var t=$(this),e=t.attr("id"),n=doT.template(Dedalus.getRawContent(t));withCombinations[e]=n,hasCombinations=!0,t.remove()}),objects[id].actions[action.attr("id")]={when:whenCheck,content:doT.template(Dedalus.getRawContent(action)),hasWith:hasCombinations,"with":withCombinations}}),objects[id].getActiveActions=getActiveActions}),objects}function getParagraphs(t){var e={};return t.find("paragraph").each(function(){var t=$(this),n=t.attr("id");e[n]={content:doT.template(Dedalus.getRawContent(t))}}),e}function getPages(t){var e={};return t.find("page").each(function(){var t=$(this),n=t.attr("id");e[n]={objects:getObjects(t),paragraphs:getParagraphs(t),isFirst:t.hasClass("first")},t.find("obj, paragraph, character").remove(),e[n].content=doT.template(Dedalus.getRawContent(t))}),e}function getInitialCurrentPage(t){return t.find("page.first").attr("id")}function getInitialInventory(){return[]}function setBeforeAfterActions(t){_story.beforeEveryThing=t.find("beforeEveryThing").text(),_story.beforeEveryPageTurn=t.find("beforeEveryPageTurn").text(),_story.beforeEveryParagraphShown=t.find("beforeEveryParagraphShown").text(),_story.afterEveryThing=t.find("afterEveryThing").text(),_story.afterEveryPageTurn=t.find("afterEveryPageTurn").text(),_story.afterEveryParagraphShown=t.find("afterEveryParagraphShown").text()}var _story={currentPage:"",title:"",inventory:[],pages:{},paragraphs:{},objects:{},initialization:"",intro:"",numParagraphsShown:0,numPagesTurned:0,numParagraphsShownInPage:0,numTotalActions:0,numActionsPerformedInPage:0,combinationActionInProgress:!1,beforeEveryThing:function(){},beforeEveryPageTurn:function(){},beforeEveryParagraphShown:function(){},afterEveryThing:function(){},afterEveryPageTurn:function(){},afterEveryParagraphShown:function(){}},temporaryDomSourceCopy;return this.dedleeSource&&this.parseDedlee(this.dedleeSource,this.domSource),temporaryDomSourceCopy=this.domSource.children().clone(!0),_story.currentPage=getInitialCurrentPage(this.domSource),_story.initialization=getInitScript(this.domSource),_story.intro=getIntroLocal(this.domSource),_story.inventory=getInitialInventory(this.domSource),_story.objects=getObjects(this.domSource),_story.pages=getPages(this.domSource),_story.paragraphs=getParagraphs(this.domSource),_story.title=getTitleLocal(this.domSource),setBeforeAfterActions(this.domSource),this.domSource.html("").append(temporaryDomSourceCopy),_story},Dedalus.prototype.generateEmptyStory=function(){return{currentPageIs:this.currentPageIs.bind(this),removeFromInventory:this.removeFromInventory.bind(this),putInInventory:this.putInInventory.bind(this),isInInventory:this.isInInventory.bind(this),getNumTotalActions:this.getNumTotalActions.bind(this),getNumActionsPerformedInPage:this.getNumActionsPerformedInPage.bind(this),getNumPagesTurned:this.getNumPagesTurned.bind(this),getNumParagraphsShown:this.getNumParagraphsShown.bind(this),getNumParagraphsShownInPage:this.getNumParagraphsShownInPage.bind(this),turnTo:this.turnTo.bind(this),disable:this.disable.bind(this),enable:this.enable.bind(this),showParagraph:this.showParagraph.bind(this),endGame:this.endGame.bind(this)}},Dedalus.prototype.print=function(t,e){this.storyUndo=jQuery.extend(!0,{},story),this._storyUndo=jQuery.extend(!0,{},this._story),this.afterUndoSave(),this.executeBeforeEveryThing(),this.executePrinting(t,e),this.executeAfterEveryThing(),this._story.numTotalActions+=1,this._story.numActionsPerformedInPage+=1},Dedalus.prototype.turnTo=function(t,e){var n=e||!1,r=this.getPage(t),o=r.content;this.executeBeforeEveryPageTurn(),n?this.print(o):(this.print(o,!0),"intro"!==t&&this.setCurrentPageId(t)),this.executeAfterEveryPageTurn(),this._story.numParagraphsShownInPage=0,this._story.numActionsPerformedInPage=0,this._story.numPagesTurned+=1},Dedalus.prototype.showParagraph=function(t){var e=this.getParagraph(t),n=e.content;this.executeBeforeEveryParagraphShown(),this.print(n),this.executeAfterEveryParagraphShown(),this._story.numParagraphsShown+=1,this._story.numParagraphsShownInPage+=1},Dedalus.prototype.getPage=function(t){return this._story.pages[t]},Dedalus.prototype.getObject=function(t){var e=this.getCurrentPage().objects[t];return void 0!==e?e:this._story.objects[t]},Dedalus.prototype.getActionsForObject=function(t){var e,n=[],r=this.getObject(t);for(e in r.actions)r.actions.hasOwnProperty(e)&&r.actions[e].when()&&n.push(r.actions[e]);return n},Dedalus.prototype.getParagraph=function(t){var e=this.getCurrentPage().paragraphs[t];return void 0!==e?e:this._story.paragraphs[t]},Dedalus.prototype.activateCombinationAction=function(){this._story.combinationActionInProgress=!0},Dedalus.prototype.disactivateCombinationAction=function(){this._story.combinationActionInProgress=!1},Dedalus.prototype.isCombinationAction=function(){return this._story.combinationActionInProgress},Dedalus.prototype.currentPageIs=function(t){return this._story.currentPage===t},Dedalus.prototype.removeFromInventory=function(t){var e;for(e=0;e<this._story.inventory.length;e+=1)this._story.inventory[e]===t&&(this._story.inventory=this._story.inventory.splice(e,e));this.messageCenter.publish("inventory","inventoryChanged")},Dedalus.prototype.putInInventory=function(t){this.removeFromInventory(t),this._story.inventory.push(t),this.messageCenter.publish("inventory","inventoryChanged")},Dedalus.prototype.isInInventory=function(t){return-1!==this._story.inventory.indexOf(t)},Dedalus.prototype.executeInitialization=function(){eval(this._story.initialization)},Dedalus.prototype.getIntro=function(){return this._story.intro},Dedalus.prototype.getTitle=function(){return this._story.title},Dedalus.prototype.getInventory=function(){return this._story.inventory},Dedalus.prototype.getCurrentPageId=function(){return this._story.currentPage},Dedalus.prototype.setCurrentPageId=function(t){this._story.currentPage=t},Dedalus.prototype.getCurrentPage=function(){return this.getPage(this._story.currentPage)},Dedalus.prototype.getNumTotalActions=function(){return this._story.numTotalActions},Dedalus.prototype.getNumActionsPerformedInPage=function(){return this._story.numActionsPerformedInPage},Dedalus.prototype.getNumPagesTurned=function(){return this._story.numPagesTurned},Dedalus.prototype.getNumParagraphsShown=function(){return this._story.numParagraphsShown},Dedalus.prototype.getNumParagraphsShownInPage=function(){return this._story.numParagraphsShownInPage},Dedalus.prototype.resetCounters=function(){this._story.numPagesTurned=0,this._story.numParagraphsShown=0,this._story.numParagraphsShownInPage=0,this._story.numTotalActions=0,this._story.numActionsPerformedInPage=0},Dedalus.prototype.undo=function(){story=jQuery.extend({},this.storyUndo),this._story=jQuery.extend({},this._storyUndo),this.executeUndo()},Dedalus.prototype.save=function(){this.executeSave(story,this._story)},Dedalus.prototype.restore=function(){var t=this.getRestoreData(),e=t[0],n=t[1];this.saveAvailable()&&(this._story=jQuery.extend(!0,this.parseStory(this.options.domSource),n),story=jQuery.extend(!0,this.generateEmptyStory(),e),this.executeRestore())},Dedalus.prototype.reset=function(){this._story=this.parseStory(this.options.domSource),story=this.generateEmptyStory(),this.executeReset()},Dedalus.prototype.executeBeforeEveryThing=function(){eval(this._story.beforeEveryThing)},Dedalus.prototype.executeBeforeEveryPageTurn=function(){eval(this._story.beforeEveryPageTurn)},Dedalus.prototype.executeBeforeEveryParagraphShown=function(){eval(this._story.beforeEveryParagraphShown)},Dedalus.prototype.executeAfterEveryThing=function(){eval(this._story.afterEveryThing)},Dedalus.prototype.executeAfterEveryPageTurn=function(){eval(this._story.afterEveryPageTurn)},Dedalus.prototype.executeAfterEveryParagraphShown=function(){eval(this._story.afterEveryParagraphShown)},Dedalus.prototype.executePrinting=function(t,e){},Dedalus.prototype.executeUndo=function(){},Dedalus.prototype.executeSave=function(t,e){},Dedalus.prototype.saveAvailable=function(){},Dedalus.prototype.executeRestore=function(){},Dedalus.prototype.executeReset=function(){},Dedalus.prototype.getRestoreData=function(){},Dedalus.prototype.afterUndoSave=function(){},Dedalus.prototype.disable=function(t){},Dedalus.prototype.enable=function(){},Dedalus.prototype.endGame=function(){},Dedalus.getRawContent=function(t){var e=t.contents(),n="";return e.each(function(){n+=3===this.nodeType?this.nodeValue:this.outerHTML}),n}}();var DedalusWeb;!function(){"use strict";DedalusWeb=function(t){var e=this;Dedalus.call(this,t),this.domTarget=t.domTarget,this.inventoryTarget=t.inventoryTarget,this.titleTarget=t.titleTarget,this.interactionTarget=t.interactionTarget,this.undoTarget=t.undoTarget,this.saveTarget=t.saveTarget,this.restoreTarget=t.restoreTarget,this.resetTarget=t.resetTarget,this.undoStageTarget=t.undoStageTarget,this.domTargetParent=t.domTargetParent,this.onPrint=t.onPrint?t.onPrint.bind(this):this.onPrint,this.onInventoryUpdate=t.onInventoryUpdate?t.onInventoryUpdate.bind(this):this.onInventoryUpdate,this.undoTarget.on("click",this.undo.bind(this)),this.saveTarget.on("click",this.save.bind(this)),this.restoreTarget.on("click",this.restore.bind(this)),this.resetTarget.on("click",this.reset.bind(this)),this.titleTarget.html(this.getTitle()),this.executeReset(),this.messageCenter.subscribe("inventory","dedalusWeb",this.updateInventory.bind(this)),$("body, html").on("click",function(){e.isCombinationAction()||(e.interactionTarget.hide(),e.disactivateCombinationAction())})},DedalusWeb.prototype=new Dedalus,DedalusWeb.prototype.handleInteractions=function(){function t(t,n,r,o){e.domTarget.find(t).each(function(){var t=$(this),i=t.attr(n),a=t.attr("id"),s=a?'data-id="'+t.attr("id")+'"':"",u='data-target-id="'+i+'"',c=t.hasClass("disabled"),h=t.text(),p=$('<a href="#" '+s+" "+u+">"+h+"</a>");p.on("click",function(t){return o(i,t),t.stopPropagation(),!1}),p.addClass(r),t.after(p),t.remove(),c&&e.disable(a)})}var e=this;t("turn","to","page",function(t){e.turnTo(t),e.interactionTarget.hide()}),t("interact","with","object",function(t,n){e.interactWith(t,n)}),t("show","paragraph","paragraph",function(t){e.showParagraph(t),e.interactionTarget.hide()})},DedalusWeb.prototype.interactWith=function(t,e){function n(e){return function(){e.hasWith?(a.activateCombinationAction(),a.interactionTarget.html("<ul></ul>"),$(a.domTarget).find("a.object").add($(a.inventoryTarget).find("a")).each(function(n,r){var o=$(r),i=$(o.prop("outerHTML")),s=i.attr("data-target-id"),u=a.getObject(s),c=i.text(),h=u.inventoryName||c,p=e["with"][s]||e.content;s!==t&&(i.text(h),i.on("click",function(){a.print(p),a.interactionTarget.hide(),a.handleInteractions(),a.disactivateCombinationAction()}),a.interactionTarget.find("ul").append(i),a.interactionTarget.find("ul>a").wrap("<li>"))})):(a.print(e.content),a.interactionTarget.hide(),a.handleInteractions(),a.disactivateCombinationAction())}}var r,o,i,a=this,s=this.getObject(t),u=s.getActiveActions(),c=$(e.target);this.interactionTarget.html("<ul></ul>");for(r in u)u.hasOwnProperty(r)&&(o=u[r].content,i=$('<a href="#" data-target-id="'+t+'">'+r+"</a>"),i.on("click",n(u[r])),this.interactionTarget.find("ul").append(i),this.interactionTarget.find("ul>a").wrap("<li>"),this.interactionTarget.css("left",c.offset().left-this.interactionTarget.width()/2+c.width()/2),this.interactionTarget.css("top",c.offset().top+20),this.interactionTarget.show());return u},DedalusWeb.prototype.updateInventory=function(){function t(t){return function(e){return i.interactWith(t,e),e.stopPropagation(),!1}}var e,n,r,o,i=this,a=this.getInventory(),s=[];for(this.inventoryTarget.html("<ul></ul>"),e=0;e<a.length;e+=1)r=this.getObject(a[e]),o=r.inventoryName,n=$('<a href="#" data-target-id="'+a[e]+'">'+o+"</a>"),n.on("click",t(a[e])),s.push(n);for(s=this.onInventoryUpdate(s),e=0;e<s.length;e+=1)this.inventoryTarget.find("ul").append(s);this.inventoryTarget.find("ul>a").wrap("<li>")},DedalusWeb.prototype.executePrinting=function(t,e){var n=e||!1,r="<p>"+t()+"</p>";n?this.onPrint(r,!0)&&this.domTarget.html(r):this.onPrint(r,!1)&&this.domTarget.append(r),this.handleInteractions()},DedalusWeb.prototype.executeUndo=function(){this.domTarget.html(""),this.undoStageTarget.appendTo(this.domTarget),this.updateInventory()},DedalusWeb.prototype.afterUndoSave=function(){this.undoStageTarget.html(""),this.undoStageTarget=this.domTarget.children().clone(!0)},DedalusWeb.prototype.executeSave=function(t,e){localStorage.story=JSON.stringify(t),localStorage._story=JSON.stringify(e)},DedalusWeb.prototype.saveAvailable=function(){return localStorage.story&&localStorage._story},DedalusWeb.prototype.getRestoreData=function(){return[jQuery.parseJSON(localStorage.story),jQuery.parseJSON(localStorage._story)]},DedalusWeb.prototype.executeRestore=function(){this.updateInventory(),this.turnTo(this.getCurrentPageId())},DedalusWeb.prototype.executeReset=function(){this.turnTo("intro"),this.turnTo(this.getCurrentPageId(),!0),this.resetCounters(),this.updateInventory(),this.executeInitialization(),this.interactionTarget.hide()},DedalusWeb.prototype.disable=function(t){var e,n,r,o=this.domTarget.find('a[data-id="'+t+'"]');o.length>0&&(e=o.get(0),n='<span data-id="'+t+'">'+o.text()+"</span>",r=$._data(e,"events").click[0].handler,o.after($(n).data("originalClickFn",r)),o.remove())},DedalusWeb.prototype.enable=function(t){var e=this.domTarget.find('span[data-id="'+t+'"]'),n='<a href="#" data-id="'+t+'">'+e.text()+"</a>",r=e.data("originalClickFn");e.after($(n).on("click",r)),e.remove()},DedalusWeb.prototype.endGame=function(){this.domTarget.find("a").off("click").contents().unwrap(),this.inventoryTarget.find("a").off("click").contents().unwrap()},DedalusWeb.prototype.onPrint=function(t,e){return!0},DedalusWeb.prototype.onInventoryUpdate=function(t){return t}}(),window.Artists={},!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Slideout=t()}}(function(){return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return o(n?n:t)},h,h.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){"use strict";function r(t,e){for(var n in e)e[n]&&(t[n]=e[n]);return t}function o(t,e){t.prototype=r(t.prototype||{},e.prototype)}function i(t){t=t||{},this._startOffsetX=0,this._currentOffsetX=0,this._opening=!1,this._moved=!1,this._opened=!1,this._preventOpen=!1,this._touch=void 0===t.touch?!0:t.touch&&!0,this.panel=t.panel,this.menu=t.menu,-1===this.panel.className.search("slideout-panel")&&(this.panel.className+=" slideout-panel"),-1===this.menu.className.search("slideout-menu")&&(this.menu.className+=" slideout-menu"),this._fx=t.fx||"ease",this._duration=parseInt(t.duration,10)||300,this._tolerance=parseInt(t.tolerance,10)||70,this._padding=this._translateTo=parseInt(t.padding,10)||256,this._orientation="right"===t.side?-1:1,this._translateTo*=this._orientation,this._touch&&this._initTouchEvents()}var a,s=t("decouple"),u=t("emitter"),c=!1,h=window.document,p=h.documentElement,d=window.navigator.msPointerEnabled,l={start:d?"MSPointerDown":"touchstart",move:d?"MSPointerMove":"touchmove",end:d?"MSPointerUp":"touchend"},f=function(){var t=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,e=h.getElementsByTagName("script")[0].style;for(var n in e)if(t.test(n))return"-"+n.match(t)[0].toLowerCase()+"-";return"WebkitOpacity"in e?"-webkit-":"KhtmlOpacity"in e?"-khtml-":""}();o(i,u),i.prototype.open=function(){var t=this;return this.emit("beforeopen"),-1===p.className.search("slideout-open")&&(p.className+=" slideout-open"),this._setTransition(),this._translateXTo(this._translateTo),this._opened=!0,setTimeout(function(){t.panel.style.transition=t.panel.style["-webkit-transition"]="",t.emit("open")},this._duration+50),this},i.prototype.close=function(){var t=this;return this.isOpen()||this._opening?(this.emit("beforeclose"),this._setTransition(),this._translateXTo(0),this._opened=!1,setTimeout(function(){p.className=p.className.replace(/ slideout-open/,""),t.panel.style.transition=t.panel.style["-webkit-transition"]=t.panel.style[f+"transform"]=t.panel.style.transform="",t.emit("close")},this._duration+50),this):this},i.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},i.prototype.isOpen=function(){return this._opened},i.prototype._translateXTo=function(t){this._currentOffsetX=t,this.panel.style[f+"transform"]=this.panel.style.transform="translate3d("+t+"px, 0, 0)"},i.prototype._setTransition=function(){this.panel.style[f+"transition"]=this.panel.style.transition=f+"transform "+this._duration+"ms "+this._fx},i.prototype._initTouchEvents=function(){var t=this;this._onScrollFn=s(h,"scroll",function(){t._moved||(clearTimeout(a),c=!0,a=setTimeout(function(){c=!1},250))}),this._preventMove=function(e){t._moved&&e.preventDefault()},h.addEventListener(l.move,this._preventMove),this._resetTouchFn=function(e){"undefined"!=typeof e.touches&&(t._moved=!1,t._opening=!1,t._startOffsetX=e.touches[0].pageX,t._preventOpen=!t._touch||!t.isOpen()&&0!==t.menu.clientWidth)},this.panel.addEventListener(l.start,this._resetTouchFn),this._onTouchCancelFn=function(){t._moved=!1,t._opening=!1},this.panel.addEventListener("touchcancel",this._onTouchCancelFn),this._onTouchEndFn=function(){t._moved&&(t._opening&&Math.abs(t._currentOffsetX)>t._tolerance?t.open():t.close()),t._moved=!1},this.panel.addEventListener(l.end,this._onTouchEndFn),this._onTouchMoveFn=function(e){if(!c&&!t._preventOpen&&"undefined"!=typeof e.touches){var n=e.touches[0].clientX-t._startOffsetX,r=t._currentOffsetX=n;if(!(Math.abs(r)>t._padding)&&Math.abs(n)>20){t._opening=!0;var o=n*t._orientation;if(t._opened&&o>0||!t._opened&&0>o)return;0>=o&&(r=n+t._padding*t._orientation,t._opening=!1),t._moved||-1!==p.className.search("slideout-open")||(p.className+=" slideout-open"),t.panel.style[f+"transform"]=t.panel.style.transform="translate3d("+r+"px, 0, 0)",t.emit("translate",r),t._moved=!0}}},this.panel.addEventListener(l.move,this._onTouchMoveFn)},i.prototype.enableTouch=function(){return this._touch=!0,this},i.prototype.disableTouch=function(){return this._touch=!1,this},i.prototype.destroy=function(){return this.close(),h.removeEventListener(l.move,this._preventMove),this.panel.removeEventListener(l.start,this._resetTouchFn),this.panel.removeEventListener("touchcancel",this._onTouchCancelFn),this.panel.removeEventListener(l.end,this._onTouchEndFn),this.panel.removeEventListener(l.move,this._onTouchMoveFn),h.removeEventListener("scroll",this._onScrollFn),this.open=this.close=function(){},this},e.exports=i},{decouple:2,emitter:3}],2:[function(t,e,n){"use strict";function r(t,e,n){function r(t){s=t,i()}function i(){u||(o(a),u=!0)}function a(){n.call(t,s),u=!1}var s,u=!1;t.addEventListener(e,r,!1)}var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();e.exports=r},{}],3:[function(t,e,n){"use strict";var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};n.__esModule=!0;var o=function(){function t(){r(this,t)}return t.prototype.on=function(t,e){return this._eventCollection=this._eventCollection||{},this._eventCollection[t]=this._eventCollection[t]||[],this._eventCollection[t].push(e),this},t.prototype.once=function e(t,n){function r(){e.off(t,r),n.apply(this,arguments)}var e=this;return r.listener=n,this.on(t,r),this},t.prototype.off=function(t,e){var n=void 0;return this._eventCollection&&(n=this._eventCollection[t])?(n.forEach(function(t,r){(t===e||t.listener===e)&&n.splice(r,1)}),0===n.length&&delete this._eventCollection[t],this):this},t.prototype.emit=function n(t){for(var e=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;r>i;i++)o[i-1]=arguments[i];var n=void 0;return this._eventCollection&&(n=this._eventCollection[t])?(n=n.slice(0),n.forEach(function(t){return t.apply(e,o)}),this):this},t}();n["default"]=o,e.exports=n["default"]},{}]},{},[1])(1)});